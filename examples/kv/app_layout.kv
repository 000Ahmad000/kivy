BoxLayout:
    BoxLayout:
        orientation: 'vertical'
        ToggleButton:
            id: bswitch
        ToggleButton:
            id: bswitch2

    BoxLayout:
        orientation:
            '{}{}'.format(
            'vertical' if bswitch.state == 'down' else 'horizontal',
            '-reverse' if bswitch2.state == 'down' else '')

        Button:
            id: btn1
            text: 'Button 1'

        Button:
            text: btn1.state

        Button:
            text: 'Button 3'

        Button:
            text: 'Button 4'

        Button:
            text: 'Button 5'
